#!/bin/bash -e
#
# Copyright 2016(c) The Ontario Institute for Cancer Research. All rights reserved.
#
# Description:
# 	Runs the ICGC DCC storage client to upload/download/slice files in cloud environments

# Binary directory
BASE_DIR=`dirname $0`/..; export BASE_DIR

# Installation directory
CLIENT_DIR="$(cd ${BASE_DIR} && pwd -P)"

exec java -Xmx3G \
	-Dlogging.file=${BASE_DIR}/logs/client.log \
	-Dspring.config.location=${CLIENT_DIR}/conf/ \
	-Dlogging.config=${CLIENT_DIR}/conf/logback.xml \
	-Dclient.directory=${CLIENT_DIR} \
	-Dstorage.profile=${STORAGE_PROFILE:-aws} \
	-cp ${BASE_DIR}/conf:${BASE_DIR}/lib/icgc-storage-client.jar \
	org.springframework.boot.loader.JarLauncher \
	"$@"